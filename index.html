<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Moodle SAML2 Auth by dmirandaa</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Moodle SAML2 Auth</h1>
      <h2 class="project-tagline">Moodle plugin for authentication using a existing SimpleSAMLphp Service Provider</h2>
      <a href="https://github.com/dmirandaa/moodle-auth_saml2_auth" class="btn">View on GitHub</a>
      <a href="https://github.com/dmirandaa/moodle-auth_saml2_auth/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/dmirandaa/moodle-auth_saml2_auth/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="saml2-authentication-using-exists-simplesamlphp-service-provider" class="anchor" href="#saml2-authentication-using-exists-simplesamlphp-service-provider" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>SAML2 Authentication using exists SimpleSAMLphp Service Provider</h1>

<p>You'll need the following pre-requirement:</p>

<ul>
<li>A working SimpleSAMLphp Service Provider (SP) installation (<a href="https://simplesamlphp.org">https://simplesamlphp.org</a>) <em>working means that the metadata from SP must be registered in Identity Provider (IdP). Can be found in /config/authsources.php</em>
</li>
<li>The absolute path for the SimpleSAMLphp installation on server</li>
<li>The authsource name from SP in which your users will authenticate against</li>
</ul>

<p>There are a couple of related SAML plugins for Moodle. Below are the main diferences between this plugin, named as saml2_auth, and the others</p>

<p>The key for this plugin is that you can use your exists Service Provider (SP) without needed to exchange the metadata with the Identity Provider (IdP) for every new Moodle instances. <em>(for instances in the same host name)</em></p>

<h2>
<a id="there-are-two-other-saml-plugins-that-canor-use-simplesamlphp" class="anchor" href="#there-are-two-other-saml-plugins-that-canor-use-simplesamlphp" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>There are two other SAML plugins that can/or use SimpleSAMLphp</h2>

<ul>
<li>
<a href="https://moodle.org/plugins/auth_saml">auth_saml</a> - There's no compatible version with Moodle 3.0+. The code is obsolete and the plugin go beyond the purpose of a authentication plugin, mixing auth and enrol rules.</li>
<li>
<a href="https://moodle.org/plugins/auth_saml2">auth_saml2</a> - It's a complete solution for those that don't have a working SP installation, but, because it generate its own SP, for every single instance of Moodle that you install, you must exchange the metadata with the owner of the IdP. In a environment that there are more than one IdP, this is unpractical.</li>
</ul>

<h2>
<a id="the-following-options-can-be-set-in-config" class="anchor" href="#the-following-options-can-be-set-in-config" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The following options can be set in config:</h2>

<ul>
<li>SimpleSAMLphp installation path</li>
<li>Dual login (Yes/No) - Can login with manual accounts like admin</li>
<li>Single Sign Off (Yes/No) - Should we sign off users from Moodle and IdP?</li>
<li>Username mapping - Which attribute from IdP should be used for username</li>
<li>Username checking - Where to check if the username exists</li>
<li>Auto create users - Allow create new users</li>
<li>SP source name - Generally default-sp in SimpleSAMLphp</li>
<li>Logout URL to redirect users after logout</li>
<li>Allow users to edit or not the profile</li>
</ul>

<p>To override the authentication and login directly in Moodle (ex.: using admin account), add the saml=off parameter in the URL (ex.: <a href="https://my.moodle/login/index.php?saml=off">https://my.moodle/login/index.php?saml=off</a>)</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/dmirandaa/moodle-auth_saml2_auth">Moodle SAML2 Auth</a> is maintained by <a href="https://github.com/dmirandaa">dmirandaa</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
